<!DOCTYPE html">
<html lang="en" >
<head><meta charset="utf-8">
<title>Bracketup: Correspondence rhoScript Example (browserified)</title>
  <link rel="stylesheet" type="text/css" href="../page.css" />
  <link rel="stylesheet" type="text/css" href="correspondence.css" />
  <link rel="stylesheet" type="text/css" href="correspondence-rhoscript.css" />
  <link rel="stylesheet" type="text/css" href="correspondence-programming-output.css" />
  <script language="javascript" type="text/javascript" src="lib/jquery-1.10.1.js"></script>
  <script language="javascript" type="text/javascript" src="correspondence.js"></script>
  <script language="javascript" type="text/javascript" src="correspondence-bracketup-browserified.js"></script>
</head>

<body>
<h1>Correspondence rhoScript Example Using Bracketup (browserified)</h1>

<div class="author">Author: <a href="http://thinkinghard.com">Philip Dorrell</a></div>

<p><a href="http://pdorrell.github.io/correspondence/">Correspondence</a> is a framework for interactively visualizing <i>correspondences</i> between
items in related structures.</p>

<p><a href="../index.html">Bracketup</a> is a generic structured textual markup language
(one that I have just invented).</p>

<p>This particular page shows the same translation visualisation as
<a href="http://thinkinghard.com/correspondence/rhoscript/index.html">http://thinkinghard.com/correspondence/rhoscript/index.html</a>.</p>

<p>But there is one important difference. Whereas that page was generated off-line using the Ruby application
<b>correspondence-markup</b>, from source code (a copy
of which is included in the HTML page source as a comment), this page is <i>generated in the browser</i>,
by Javascript code, from Bracketup source code included in a <b>&lt;script&gt;</b> element in the page 
source.</p>

<p>(The <b>bracketup</b> source code is similar to, but not quite the same as, the original <b>correspondence-markup</b>
source code.)</p>

<h2>rhoScript example: Eight Queens Puzzle</h2>

<p>Mouse over the translations to see the relationships between them.</p>

<!-- The following script element is the actual source for this page. It is interpreted
by the Javascript code to generate the DOM, in the HTML format required by the Correspondence framework.-->
<noscript>There is content here in the page which cannot be viewed unless you have Javascript enabled.</noscript>
<script type="text/correspondence-bracketup">
[translation [_title Queens Puzzle]
 [rhoscript [_languageTitle rhoScript]
  [A [1 8] [2 range]]
  [B [1 permutations]]
  [C ([1 with-index]]
  [D ([1 sum]) [2 map]]
  [E [1 uniq]]
  [F [1 arg-a] [2 with-index]]
  [G ([1 *exploding] [2 subtract]) [3 map]]
  [H [1 uniq]]
  [I [1 concatenate]]
  [J [1 length])]
  [K [1 keep-maxes-by]]
 ]
 [english [_languageTitle English]
  [A For [2 the sequence of numbers from 0 to 1 less than] [1 8],]
  [B consider [1 all possible permutations].]
  [C For a given permutation, [1 specify X and Y co-ordinates for the 8 queens (i.e. an "arrangement") as an array of arrays
 of the form \[[b x], [b y]\], where [b x] is a number that increases from 0 to 7, and [b y] is the corresponding value in the permutation.]]
  [D [2 For each position of a queen in an arrangement], [1 add the [b x] and [b y] coordinates] to identify which diagonal in the [b x=-y] direction the queen is on.]
  [E [1 Keep only the unique IDs of those occupied diagonals.]]]
  [F [1 Again, for each permutation], [2 convert it into an arrangement as a list of \[[b x], [b y]\] coordinate pairs].]
  [G [3 For each coordinate pair within the arrangement], [2 subtract the Y coordinate from the X coordinate] [1 (having extracted the two coordinates from the array representing the coordinate pair to use as arguments to the [b subtract] function)], to determine the ID of the diagonal in the [_b x=y] direction.]
  [H [1 Keep only the unique IDs of those diagonals.]]
  [I [1 Join the two lists of diagonal IDs together.]]
  [J [1 Count how many diagonal IDs are in the joined list.]]
  [K [1 Having done that for each [a [href http://en.wikipedia.org/wiki/Permutation]permutation], keep those permutations that have the maximum number of diagonals occupied.]]
 ]
]
</script>

<h2>Alternative "Un-Browserified" Version of this Page</h2>

<p>This page uses <a href="http://browserify.org/">browserify</a> to 
compile Javascript modules using CommonJS <b>require</b> and <b>exports</b>
into a single file.</p>

<p>For development, it is preferable to run source code directly, without
a separate compilation step.</p>

<p>For example, as I have done <a href="rhoScriptExample.html">here</a>, using <b>module-simulator.js</b>,
which implements the functionality of <b>require</b> and <b>exports</b> directly in the browser.</p>

<div class="date">Last updated: 10 October 2013</div>

</body>
</html>
